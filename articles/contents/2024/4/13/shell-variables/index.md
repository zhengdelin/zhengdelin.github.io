# [ShellScript學習紀錄03] - 變數

<!-- >- [\[ShellScript學習紀錄03\] - 變數](#shellscript學習紀錄03---變數)
>  - [變數型態](#變數型態)
>    - [字符串（String）](#字符串string)
>    - [整數（Integer）](#整數integer)
>    - [浮點數（Float）](#浮點數float)
>    - [布爾值（Boolean）](#布爾值boolean)
>    - [數組（Array）](#數組array)
>    - [關聯數組（Associative Array）](#關聯數組associative-array)
>  - [定義變數](#定義變數)
>  - [訪問變數](#訪問變數)
>  - [只讀變數](#只讀變數)
>  - [刪除變數](#刪除變數)
>  - [特殊變數](#特殊變數)
>  - [使用大括號](#使用大括號)
>  - [使用變數替換](#使用變數替換)
>  - [使用雙引號來引用變數?](#使用雙引號來引用變數) -->


在Shell腳本中，使用變數是一種常見的方法，可以存儲和操作數據。變數可以包含各種類型的數據，包括數字、字符串和布爾值。以下是如何在Shell中使用變數的基本介紹：

## 變數型態

### 字符串（String）

在Shell中，字符串是最常見的變數類型。它可以包含文本、數字和特殊字符。字符串可以使用單引號（'）或雙引號（"）來定義。

```bash
name='John'
message="Hello, World!"
```

### 整數（Integer）

整數是一個不帶小數部分的數字。在Shell中，整數變數通常用於表示計數或索引等。

```bash
count=10
index=3
```

### 浮點數（Float）

浮點數是帶有小數部分的數字。在Shell中，由於其原生支持的限制，處理浮點數可能需要使用外部工具或技巧。

```bash
pi=3.14
average=4.5
```

### 布爾值（Boolean）

布爾值表示真或假。在Shell中，通常使用 0 或 `false` 表示假，非零數字或 `true` 表示真。

```bash
is_admin=1
is_active=0
```

### 數組（Array）

數組是一個可以存儲多個值的變數。在Shell中，可以使用數組來存儲一系列相關的值。

```bash
fruits=("apple" "banana" "orange")
```

### 關聯數組（Associative Array）

關聯數組是一種特殊的數組，它使用字符串作為索引。這樣可以通過字符串索引來訪問和操作數據。

```bash
declare -A colors
colors["red"]="#FF0000"
colors["green"]="#00FF00"
```

## 定義變數

你可以使用等號 `=` 來定義變數，並給變數賦值。注意等號兩邊不能有空格。例如：

```bash
name="John"
age=30
is_admin=true

```

## 訪問變數

要訪問變數的值，可以使用 `$` 符號，後面跟著變數的名稱。例如：

```bash
echo "Name: $name"
echo "Age: $age"
echo "Is admin? $is_admin"
```
## 只讀變數

你可以使用 `readonly` 關鍵字來定義只讀變數，一旦定義，就無法再修改它的值。例如：

```bash
readonly name="John"
```

## 刪除變數

你可以使用 `unset` 命令來刪除變數。例如：

```bash
unset age
```

## 特殊變數

Shell中還有一些特殊的變數，具有特定的含義，例如：

*   `$0`：腳本名稱
*   `$1`, `$2`, ...：位置參數（腳本或函數的參數）
*   `$#`：位置參數的個數
*   `$?`：上一個命令的退出狀態碼
*   `$$`：當前進程的PID
*   `$USER`：當前用戶的用戶名
*   `$HOME`：當前用戶的家目錄

## 使用大括號

在訪問變數時，你可以使用大括號 `{}` 將變數名括起來，以幫助解析器區分變數名的邊界。這對於在變數名後面立即加上字母、數字或下劃線以及在字符串中使用變數時非常有用。例如：

bashCopy code

```bash
echo "${name}s"
echo "Value: ${age}"
```

這樣可以防止解析器錯誤地將變數名的一部分與其後面的文本相連。

## 使用變數替換

在Shell中，可以使用 `$()` 或反引號 \`\`\`\` 來執行命令，並將命令的輸出賦值給變數。例如：

```bash
current_date=$(date +%Y-%m-%d)
echo "Current date: $current_date"
```

這種形式也可以用於執行命令並將其結果嵌入到字符串中。

## 使用雙引號來引用變數?

在 Bash 中，使用雙引號 `"$a"` 來引用變數是一個良好的實踐，特別是當變數可能包含空格或其他特殊字符時。以下是幾個原因：

1.  **空格和特殊字符**：如果變數中包含空格或其他特殊字符，使用雙引號可以避免它們被誤解為命令的一部分，從而導致意外的行為。
    
2.  **防止變數拆分**：如果變數中包含多個單詞，沒有引用它們可能會導致變數被拆分成多個單詞，這可能會破壞預期的行為。使用雙引號可以防止這種情況發生。
    
3.  **防止通配符展開**：如果變數中包含通配符（如 `*` 或 `?`），沒有引用它們可能會導致它們被展開為符合當前目錄下文件的列表。使用雙引號可以防止這種情況發生。

為了確保程式的健壯性和可靠性，最好還是習慣性地使用雙引號來引用變數，例如：
```bash
a=1
b=1

if [ "$a" -eq "$b" ]
then
    echo '1==1'
else
    echo '1!=1'
fi
```



這就是在Shell腳本中使用變數的一些基本方法。變數是Shell編程中的一個重要概念，熟練地使用它們可以幫助你編寫更靈活、更強大的腳本。

